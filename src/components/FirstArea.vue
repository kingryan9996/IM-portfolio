<template>
<article class="first-area-wrap">  
  <h1>
    <div class="svg-path">
      <div class="svg-text-wrap">
        <div class="svg-portfolio">
        <svg class="text-svg p">
          <text x="0" y="120" >
            P
          </text>
        </svg>
        <svg class="text-svg o">
          <text x="0" y="120" >
            o
          </text>
        </svg>
        <svg class="text-svg r">
          <text x="0" y="120" >
            r
          </text>
        </svg>
        <svg class="text-svg t">
          <text x="0" y="120" >
            t
          </text>
        </svg>
        <svg class="text-svg f">
          <text x="0" y="120" >
            f
          </text>
        </svg>
        <svg class="text-svg o">
          <text x="0" y="120" >
            o
          </text>
        </svg>
        <svg class="text-svg l">
          <text x="0" y="120" >
            l
          </text>
        </svg>
        <svg class="text-svg i">
          <text x="0" y="120" >
            i
          </text>
        </svg>
        <svg class="text-svg o">
          <text x="0" y="120" >
            o
          </text>
        </svg>
        </div>
        <div class="svg-Front">
          <svg class="text-svg F">
            <text x="0" y="130" >
              F
            </text>
          </svg>
          <svg class="text-svg r">
            <text x="0" y="130" >
              r
            </text>
          </svg>
          <svg class="text-svg o">
            <text x="0" y="130" >
              o
            </text>
          </svg>
          <svg class="text-svg n">
            <text x="0" y="130" >
              n
            </text>
          </svg>
          <svg class="text-svg t">
            <text x="0" y="130">
              t
            </text>
          </svg>          
        </div>
        </div>
        <div class="svg-And">
          <svg class="text-svg And">
            <text x="0" y="300">
              &
            </text>
          </svg>
        </div>
      </div>
  </h1>
    <!-- <span class="And">&</span> -->
    <div class="sns-line">
        <ul>            
            <li><span>Address : 서울시 관악구</span></li>
            <li><span><a href="mailto:kingryan9996@gmail.com">Email : kingryan9996@gmail.com</a></span></li>
            <!-- <li><span><a href='tel:010-9996-5765'>Phone : 010-9996-5765</a></span></li> -->
            <li class="sns-link">
              <span>
                <a target="_blank" href="https://velog.io/@kingryan9996">
                  <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 30" width="24px" height="24px" fill="#999999"><path d="M 6 4 C 4.9069372 4 4 4.9069372 4 6 L 4 14.832031 A 1.0001 1.0001 0 0 0 4 15.158203 L 4 19.832031 A 1.0001 1.0001 0 0 0 4 20.158203 L 4 24 C 4 25.093063 4.9069372 26 6 26 L 24 26 C 25.093063 26 26 25.093063 26 24 L 26 20.167969 A 1.0001 1.0001 0 0 0 26 19.841797 L 26 15.167969 A 1.0001 1.0001 0 0 0 26 14.841797 L 26 6 C 26 4.9069372 25.093063 4 24 4 L 6 4 z M 6 11 L 24 11 L 24 14 L 6 14 L 6 11 z M 6 16 L 24 16 L 24 19 L 6 19 L 6 16 z M 6 21 L 24 21 L 24 24 L 6 24 L 6 21 z"/></svg>
                </a>                  
              </span>
              <span>
                <a target="_blank" href="https://www.instagram.com/kingryan9996/">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0,0,256,256" width="24px" height="24px" fill-rule="nonzero"><g fill="#999999" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><path d="M8,3c-2.757,0 -5,2.243 -5,5v8c0,2.757 2.243,5 5,5h8c2.757,0 5,-2.243 5,-5v-8c0,-2.757 -2.243,-5 -5,-5zM8,5h8c1.654,0 3,1.346 3,3v8c0,1.654 -1.346,3 -3,3h-8c-1.654,0 -3,-1.346 -3,-3v-8c0,-1.654 1.346,-3 3,-3zM17,6c-0.55228,0 -1,0.44772 -1,1c0,0.55228 0.44772,1 1,1c0.55228,0 1,-0.44772 1,-1c0,-0.55228 -0.44772,-1 -1,-1zM12,7c-2.757,0 -5,2.243 -5,5c0,2.757 2.243,5 5,5c2.757,0 5,-2.243 5,-5c0,-2.757 -2.243,-5 -5,-5zM12,9c1.654,0 3,1.346 3,3c0,1.654 -1.346,3 -3,3c-1.654,0 -3,-1.346 -3,-3c0,-1.654 1.346,-3 3,-3z"></path></g></g></svg>
                </a>
              </span>
              <span>
                <a target="_blank" href="https://www.facebook.com/profile.php?id=100003734940692">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0,0,256,256" width="24px" height="24px" fill-rule="nonzero"><g fill="#999999" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><path d="M11.666,2.005c-5.046,0.165 -9.292,4.246 -9.641,9.283c-0.369,5.329 3.442,9.832 8.481,10.589v-7.227h-1.614c-0.726,0 -1.314,-0.588 -1.314,-1.314v0c0,-0.726 0.588,-1.314 1.314,-1.314h1.613v-1.749c0,-2.896 1.411,-4.167 3.818,-4.167c0.357,0 0.662,0.008 0.921,0.021c0.636,0.031 1.129,0.561 1.129,1.198v0c0,0.663 -0.537,1.2 -1.2,1.2h-0.442c-1.022,0 -1.379,0.969 -1.379,2.061v1.437h1.87c0.591,0 1.043,0.527 0.953,1.111l-0.108,0.701c-0.073,0.47 -0.477,0.817 -0.953,0.817h-1.762v7.247c4.883,-0.663 8.648,-4.837 8.648,-9.899c0,-5.634 -4.659,-10.179 -10.334,-9.995z"></path></g></g></svg>
                </a>
              </span>
            </li>
        </ul>
    </div>
    <MyCanvas class="canvas"/>
  </article>
</template>

<script>
import MyCanvas from './MyCanvas.vue';
export default {
   components: {MyCanvas},
  
   mounted() {
    let paths = document.querySelectorAll(".first-area-wrap .svg-portfolio text");
    let texts = document.querySelectorAll('text')

    let startTime = new Date();    

    if (paths.length > 0) {
    // setTextAnimation(0.15,2.8,2,'linear','#FFF',true)
    setTextAnimation(0.1,1.2,2,'linear','#FFF',true)
  }

  function setTextAnimation(delay, duration, strokeWidth, timingFunction, strokeColor) {
    // if(paths.length == 0){return setTextAnimation(0.15,2.8,2,'linear','#ffffff',true)}
    // let mode=repeat?'infinite':'forwards'
    let mode='forwards'
    // console.log(texts,'??')
              for (let i = 0; i < texts.length; i++) {
                  const text = texts[i];
                  const Textlength = Math.floor(text.textLength.baseVal.value);
                  // console.log(Math.floor(text.textLength.baseVal.value))
                  text.style["stroke-dashoffset"] = `${Textlength}px`;
                  text.style["stroke-dasharray"] = `${Textlength}px`;
                  text.style["stroke-width"] = `${strokeWidth}px`;
                  text.style["stroke"] = `${strokeColor}`;
                  text.style["animation"] = `${duration}s svg-text-anim ${mode} ${timingFunction}`;
                  text.style["animation-delay"] = `${i * delay}s`;
              }
          }


    window.addEventListener('load',()=>{
      const textSvg = document.querySelectorAll(".svg-text-wrap svg")
      const AndSvgEl = document.querySelector(".svg-And > .text-svg")


      AndSvgEl.addEventListener('mouseover',(e)=>{

        let endTime = new Date();
        if (endTime - startTime > 3200)
            if (! e.target.parentElement.classList.contains("active3d")) {
              e.target.parentElement.classList.add("active3d")              
                setTimeout(()=>{
                  e.target.parentElement.classList.remove("active3d")
                },1000)
              }
          }
        )

      textSvg.forEach((item,index) => {        
        textSvg[index].addEventListener('mouseover',(e)=>{

          let endTime = new Date();
          if (endTime - startTime > 3200)
            if (! e.target.parentElement.classList.contains("active3d")) {
              e.target.parentElement.classList.add("active3d")
              if (e.target.style.fill == ""){
                e.target.style.fill = "#FFF"
                setTimeout( () => {
                e.target.style.fill = ""
              },1000)
              }

              setTimeout( () => {
                e.target.parentElement.classList.remove("active3d")
              },1000)
            }          
        })
      })
    })
   }
  }
</script>

<style lang="scss">
@import url('https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Inter:wght@300;400;700&display=swap');
@import "@/assets/scss/firstArea.scss";
</style>